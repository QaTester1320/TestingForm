<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QA Intake & Tracking Portal</title>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #64748b;
            --success: #22c55e;
            --warning: #f59e0b;
            --danger: #ef4444;
            --bg: #f8fafc;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: var(--bg); color: #1e293b; padding: 20px; line-height: 1.6; }
        .container { max-width: 1100px; margin: 0 auto; }

        header { text-align: center; margin-bottom: 30px; }
        header h1 { color: var(--primary); font-size: 2rem; }

        /* Tabs */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid #ddd; }
        .tab { padding: 12px 24px; cursor: pointer; background: #e2e8f0; border-radius: 8px 8px 0 0; font-weight: 600; transition: 0.3s; }
        .tab.active { background: var(--primary); color: white; }

        .tab-content { display: none; background: white; padding: 25px; border-radius: 8px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .tab-content.active { display: block; }

        /* Form Styling */
        .section-title { margin: 20px 0 10px; padding-bottom: 5px; border-bottom: 1px solid #eee; color: var(--primary); font-size: 1.1rem; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9rem; }
        input, select, textarea { width: 100%; padding: 10px; border: 1px solid #cbd5e1; border-radius: 6px; font-size: 1rem; }
        
        .checkbox-group { display: flex; flex-wrap: wrap; gap: 15px; background: #f1f5f9; padding: 15px; border-radius: 6px; }
        .check-item { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; }
        .check-item input { width: auto; }

        /* BrowserStack specific */
        .bs-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; }
        .bs-item { background: #fff; border: 1px solid #ddd; padding: 10px; border-radius: 4px; }

        button.submit-btn { background: var(--success); color: white; border: none; padding: 15px 30px; border-radius: 6px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 20px; font-size: 1.1rem; }
        button.submit-btn:hover { opacity: 0.9; }

        /* Dashboard Table */
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size: 0.85rem; }
        th { background: #f1f5f9; text-align: left; padding: 12px; border-bottom: 2px solid #ddd; }
        td { padding: 12px; border-bottom: 1px solid #eee; vertical-align: top; }
        
        .badge { padding: 4px 8px; border-radius: 4px; font-weight: bold; font-size: 0.75rem; text-transform: uppercase; }
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-progress { background: #dbeafe; color: #1e40af; }
        .status-completed { background: #dcfce7; color: #166534; }
        
        .action-btns { display: flex; gap: 5px; }
        .btn-sm { padding: 4px 8px; border: none; border-radius: 4px; cursor: pointer; font-size: 0.75rem; color: white; }
        .btn-edit { background: var(--primary); }
        .btn-del { background: var(--danger); }

        @media (max-width: 768px) {
            .grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ðŸš€ QA Request Portal</h1>
        <p>Bridging the gap between Development & Quality Assurance</p>
    </header>

    <div class="tabs">
        <div class="tab active" onclick="switchTab('submit')">Submit Test Request</div>
        <div class="tab" onclick="switchTab('track')">QA Dashboard (Admin)</div>
    </div>

    <div id="submit" class="tab-content active">
        <form id="testForm">
            <div class="grid">
                <div class="form-group">
                    <label>Project Name / Feature *</label>
                    <input type="text" id="project" placeholder="e.g. Checkout Redesign" required>
                </div>
                <div class="form-group">
                    <label>Requested By (Dev/Designer) *</label>
                    <input type="text" id="requester" required>
                </div>
            </div>

            <div class="section-title">Testing Scope Confirmation</div>
            <div class="checkbox-group">
                <div class="check-item"><input type="checkbox" id="scope_new"> <label for="scope_new">New Feature Testing</label></div>
                <div class="check-item"><input type="checkbox" id="scope_bug"> <label for="scope_bug">Bug Fix Validation</label></div>
                <div class="check-item"><input type="checkbox" id="scope_smoke"> <label for="scope_smoke">Smoke Testing</label></div>
            </div>

            <div class="section-title">Regression Testing Needed?</div>
            <div class="checkbox-group">
                <div class="check-item"><input type="radio" name="regression" value="Full" id="reg_full"> <label for="reg_full">Full Regression</label></div>
                <div class="check-item"><input type="radio" name="regression" value="Partial" id="reg_part"> <label for="reg_part">Partial (Specify modules below)</label></div>
                <div class="check-item"><input type="radio" name="regression" value="None" id="reg_none" checked> <label for="reg_none">No Regression Required</label></div>
            </div>

            <div class="section-title">BrowserStack / Device Requirements (Enter Number)</div>
            <div class="bs-grid">
                <div class="bs-item"><label>iOS</label><input type="number" id="bs_ios" placeholder="0"></div>
                <div class="bs-item"><label>iPad</label><input type="number" id="bs_ipad" placeholder="0"></div>
                <div class="bs-item"><label>Android</label><input type="number" id="bs_android" placeholder="0"></div>
                <div class="bs-item"><label>macOS</label><select id="bs_macos"><option value="No">No</option><option value="Yes">Yes</option></select></div>
            </div>

            <div class="grid" style="margin-top:20px;">
                <div class="form-group">
                    <label>Target Browsers</label>
                    <div class="checkbox-group">
                        <div class="check-item"><input type="checkbox" class="browser-check" value="Chrome"> <label>Chrome</label></div>
                        <div class="check-item"><input type="checkbox" class="browser-check" value="Firefox"> <label>Firefox</label></div>
                        <div class="check-item"><input type="checkbox" class="browser-check" value="Safari"> <label>Safari</label></div>
                        <div class="check-item"><input type="checkbox" class="browser-check" value="Mobile"> <label>Mobile</label></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Environments</label>
                    <div class="checkbox-group">
                        <div class="check-item"><input type="checkbox" class="env-check" value="Dev"> <label>Dev</label></div>
                        <div class="check-item"><input type="checkbox" class="env-check" value="QA"> <label>QA</label></div>
                        <div class="check-item"><input type="checkbox" class="env-check" value="Staging"> <label>Staging</label></div>
                        <div class="check-item"><input type="checkbox" class="env-check" value="Production"> <label>Prod</label></div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Impacted Modules / Special Instructions</label>
                <textarea id="instructions" placeholder="Mention which old features might break or specific URLs..."></textarea>
            </div>

            <button type="submit" class="submit-btn">ðŸ“© Submit Request to QA</button>
        </form>
    </div>

    <div id="track" class="tab-content">
        <div class="table-container">
            <table id="qaTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Project</th>
                        <th>Requester</th>
                        <th>Regression</th>
                        <th>Devices/Browsers</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    </tbody>
            </table>
        </div>
    </div>
</div>

<script>
    // Tab Logic
    function switchTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
        if(tabId === 'track') renderTable();
    }

    // Form Logic
    document.getElementById('testForm').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const browsers = Array.from(document.querySelectorAll('.browser-check:checked')).map(cb => cb.value);
        const envs = Array.from(document.querySelectorAll('.env-check:checked')).map(cb => cb.value);
        const scope = [];
        if(document.getElementById('scope_new').checked) scope.push('New');
        if(document.getElementById('scope_bug').checked) scope.push('BugFix');
        if(document.getElementById('scope_smoke').checked) scope.push('Smoke');

        const request = {
            id: Date.now(),
            date: new Date().toLocaleDateString(),
            project: document.getElementById('project').value,
            requester: document.getElementById('requester').value,
            scope: scope.join(', '),
            regression: document.querySelector('input[name="regression"]:checked').value,
            devices: `iOS:${document.getElementById('bs_ios').value || 0}, iPd:${document.getElementById('bs_ipad').value || 0}, And:${document.getElementById('bs_android').value || 0}, Mac:${document.getElementById('bs_macos').value}`,
            browsers: browsers.join(', '),
            envs: envs.join(', '),
            notes: document.getElementById('instructions').value,
            status: 'pending'
        };

        const history = JSON.parse(localStorage.getItem('qa_tasks') || '[]');
        history.unshift(request);
        localStorage.setItem('qa_tasks', JSON.stringify(history));

        alert('Request Submitted Successfully!');
        this.reset();
    });

    // Dashboard Logic
    function renderTable() {
        const history = JSON.parse(localStorage.getItem('qa_tasks') || '[]');
        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = history.length === 0 ? '<tr><td colspan="7">No requests found.</td></tr>' : '';

        history.forEach(task => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${task.date}</td>
                <td><strong>${task.project}</strong><br><small>${task.scope}</small></td>
                <td>${task.requester}</td>
                <td>${task.regression}</td>
                <td><small>BS: ${task.devices}<br>Br: ${task.browsers}</small></td>
                <td>
                    <select onchange="updateStatus(${task.id}, this.value)" class="status-${task.status}">
                        <option value="pending" ${task.status === 'pending' ? 'selected' : ''}>Pending</option>
                        <option value="progress" ${task.status === 'progress' ? 'selected' : ''}>In Progress</option>
                        <option value="completed" ${task.status === 'completed' ? 'selected' : ''}>Completed</option>
                    </select>
                </td>
                <td class="action-btns">
                    <button class="btn-sm btn-del" onclick="deleteTask(${task.id})">Del</button>
                </td>
            `;
            tbody.appendChild(row);
        });
    }

    function updateStatus(id, newStatus) {
        let history = JSON.parse(localStorage.getItem('qa_tasks'));
        history = history.map(t => t.id === id ? {...t, status: newStatus} : t);
        localStorage.setItem('qa_tasks', JSON.stringify(history));
        renderTable();
    }

    function deleteTask(id) {
        if(confirm('Delete this record?')) {
            let history = JSON.parse(localStorage.getItem('qa_tasks'));
            history = history.filter(t => t.id !== id);
            localStorage.setItem('qa_tasks', JSON.stringify(history));
            renderTable();
        }
    }
</script>

</body>
</html>
